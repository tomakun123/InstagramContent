n8n

1. in terminal run: ```npx n8n``` and can use ```n8n start``` after (later may become ```npx dotenv-cli -- n8n start```)

2. Download model that is on GITHUB: https://github.com/tomakun123/LocallyHostedLM_Mistral-7B-Instruct-v0.3 which will allow you to locally host a Open-AI text generation model for free

3. Use base URL: http://127.0.0.1:1234/v1 (if that doesn't work use: http://host.docker.internal:1234/v1) to connect to n8n workflow

4. Create new action: OpenAI-->Message a model, and follow steps to fill out credential 
   1. Click Credential to connet with and select '+ Create new credential' 
   2. Fill out API-Key "local" (any unempty will work)
   3. Using Base URL as step 3
   4. Create credential and select it

5. Select under Model "META-LLAMA-3.1-8B-INSTRUCT" (or your downloaded model on server), under Role "User", under prompt:
   1. ```
            You are a skilled horror fiction writer.

        Write a self-contained horror short story between 500 and 750 words.

        STYLE & TONE:
        - Slow-burn, atmospheric horror
        - Serious and unsettling, not comedic
        - Focus on psychological dread rather than gore
        - Language should be vivid, sensory, and precise
        - Favor specificity over abstraction

        STRUCTURE:
        - Use a clear beginning, middle, and end
        - The final section must contain a concrete, disturbing development (not just a reveal)
        - The ending should recontextualize earlier details in an unsettling way
        - Avoid exposition dumps; reveal information gradually
        - Maintain consistent pacing throughout

        NARRATIVE CONSTRAINTS:
        - Write in first person
        - Set the story in a familiar, ordinary place made unsettling
        - Limit the number of characters (1–3 total)
        - The horror should stem from something subtly “wrong,” not overt monsters

        ENDING REQUIREMENTS:
        - The story must conclude with a specific implication or consequence
        - Do not end immediately after a realization; show its impact through action or observation
        - Avoid summarizing the horror in abstract terms

        WRITING GUIDELINES:
        - Use complete sentences and natural paragraph breaks
        - Avoid clichés, stock phrases, and familiar horror language
        - Do not explain the horror directly; let implications and details carry meaning
        - Keep the prose grounded and realistic

        Begin the story immediately. Do not include a title or preface.
        ```

6. (OPTIONAL) Create File Title to be used
   1. Read counter.txt found in HorrorStories folder
   2. Extract from Text File (counter to JSON)
   3. Create 'Edit Fields (Set)' node (Name : Value)
      1. counterRaw : {{ ($json.text ?? $json.content ?? $json.data ?? $json.fileContent ?? '').toString().trim() }}
      2. storyNum : {{ parseInt(($json.text ?? $json.content ?? $json.data ?? $json.fileContent ?? '0').toString().trim() || '0', 10) + 1 }}
      3. dateStr : {{ $now.toFormat('yyyy-LL-dd') }}
   4. Create 'Edit Fields (Set)' node (Name : Value)
      1. storyFileName : {{ 'HorrorStory' + $json.storyNum + '_' + $json.dateStr + '.txt' }}
      2. counterValue : {{ $json.storyNum.toString() }}
   5. Convert to Text File (Use counterValue from before as Input Field)
   6. Write File to Disk 
      1. n8n default path: .../.n8n-files/story.txt (May need to mkdir). If you want to change this path, create .env file and insert ```N8N_RESTRICT_FILE_ACCESS_TO=INSERT_FILE_PATH```, then run ```npx dotenv-cli -- n8n start``` instead of ```n8n start```
      2. for Input Binary Field use counterValue txt file from step 5
   - Should look like this:
         ![alt text](images/fileTitleCreationWorkflow.png)

7. Now connect step 6 to "Message a model" node (step 4), this will be the start of the horror story generator

8. Next goal is to pull the output text into a txt file that will be used by python scripts. In order to do this follow steps:
   1. Create new action, 'Edit Fields (Set)' node (Name : Value)
      1. Story : {{ $json.output[0].content[0].text }}
   2. Convert to Text File
      1. Text Input Field will be Story
   3. Write File to Disk
      1. File Path and Name (may have to edit .env file)
   
   
   
   
   FFMPEG IS REQUIRED MUST DOWNLOAD: https://www.ffmpeg.org/download.html#build-windows 
   Get use.ttf for font, used in createFinal.py --> stored in /font
   Allowed Path: C:/Users/Thomas M/.n8n-files/story.txt 
      2. Use npx dotenv-cli -- n8n start
         1. env path: C:\Users\Thomas M\Desktop\InstagramContent\HorrorStories\story.txt